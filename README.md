# back-project

<table>
    <tr>
        <th colspan=5>ğŸ’»ğŸ™â€â™‚ìŠ¤í„°ë””ì›</th>
    </tr>
    <tr>
        <td><a href='https://github.com/qoqomi'>ìœ ìŠ¹ì—°</a></td>
        <td><a href='https://github.com/Lee-Kyung-Dong'>ì´ê²½ë™</a></td>
        <td><a href='https://github.com/lky8967'>ì´ì •ìš°</a></td>
        <td><a href='https://github.com/ParkSungGyu1'>ë°•ì„±ê·œ</a></td>
        <td><a href='https://github.com/puppyGugu'>ì´ë³‘ìˆ˜</a></td>
</table>

<br>


# W1_mountain_review

## í•­í•´99 ì²« ë¯¸ë‹ˆí”„ë¡œì íŠ¸ (ì°¸ê°€ì : ìœ ìŠ¹ì—°, ì´ë³‘ìˆ˜, ì´ê²½ë™, ë°•ì„±ê·œ, ì´ì •ìš°)


## í”„ë¡œì íŠ¸ ì •ë³´

 - í˜¼ì ì½”ë”©ì„ ì—°ìŠµí•˜ë©° tilë¥¼ ì¼ê¸°ì²˜ëŸ¼ ììœ ë¡­ê²Œ ì ëŠ” ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” ì›¹ ì‚¬ì´íŠ¸ì…ë‹ˆë‹¤

 - ê°œë°œê¸°ê°„ : 22.6.10-6.16
---
## Stack

 - frontend : HTML, CSS, javascript

 - backend : Java , spring

 - db : mySql

 - react.js 
---
## ê²°ê³¼ë¬¼
[https://youtu.be/VQh_d5hFMBw](https://youtu.be/VQh_d5hFMBw)
---
## ìƒì„¸ê¸°ëŠ¥
### ë©”ì¸í˜ì´ì§€
1. ë©”ì¸
 - ê²Œì‹œê¸€ ì „ì²´ ì¡°íšŒ
<!--  - modal ê¸°ëŠ¥ 
 - ì‚¬ì§„ í´ë¦­ ì‹œ ìƒì„¸í˜ì´ì§€
 - ê²€ìƒ‰ê¸°ëŠ¥ ê°€ëŠ¥
<!--  - [ì „ì²´ëª©ë¡ ë³´ê¸°] button click ì‹œ ì´ë²¤íŠ¸ ë°œìƒ  -->
2. modal 
 - ë“±ë¡í•˜ê¸° button clickì‹œ ì´ë²¤íŠ¸ ë°œìƒ
 - ì‚¬ì§„ í´ë¦­ ì‹œ ìƒì„¸í˜ì´ì§€ì— ì‘ì„±í–ˆë˜ ì •ë³´ ëª¨ë‹¬ë¡œ call -->

### ë¡œê·¸ì¸,íšŒì›ê°€ì…

 - ë©”ì¸ í˜ì´ì§€ì—ì„œ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ rendering 
 - JWT Token ì´ìš© 
<!--  - íšŒì›ê°€ì… button í´ë¦­ ì‹œ íšŒì›ê°€ì… buttonìœ¼ë¡œ toggle 
 - Bulma ì‚¬ìš© -->

### ë“±ë¡í˜ì´ì§€
1. ë“±ë¡ ì¢…ë¥˜
 - Url ë“±ë¡, ì œëª©, ë‚´ìš© 
<!--  - ì‚¬ì§„ ì—…ë¡œë“œ ì‹œ íŒŒì¼ëª… ëª…ì‹œ -->
<!--  - ê°œì„ ì  : ì–´ë–¤ ì‚¬ì§„ì„ ì˜¬ë ¸ëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ íŒŒì¼ëª…ì„ ëª…ì‹œí•˜ì˜€ì§€ë§Œ ì‚¬ì§„íŒŒì¼ì„ ë¯¸ë¦¬ë³´ê¸°ë¥¼ ì¶”ê°€í•˜ì—¬ ì‚¬ìš©ìì˜ ì‹¤ìˆ˜ë¥¼ ì¤„ì¼ ìˆ˜ ìˆì„ê±° ê°™ë‹¤. -->
<!-- 2. ì˜ˆì™¸ì²˜ë¦¬
 - ì‚¬ì§„ ë˜ëŠ” ì‚°ì´ë¦„ì„ ë¯¸ì‘ì„±ì‹œ ê²½ê³ ì•ŒëŒ
 - ê°œì„ ì  : ì‚°ì´ë¦„, ì½”ìŠ¤ ì´ë¦„, ì§€ì—­ëª…, ì†Œê°ì„ ì‘ì„±ì‹œ ìš•ì„¤ ë˜ëŠ” ì€ì–´ê°€ ë“¤ì–´ê°€ëŠ” ê²½ìš°ë¥¼ ì˜ˆì™¸ì²˜ë¦¬ (ìì—°ì–´ì²˜ë¦¬ê¸°ëŠ¥)  -->

### ê²Œì‹œë¬¼

 - ë“±ë¡í˜ì´ì§€ë¡œë¶€í„° ë°›ì€ ë°ì´í„°ë¥¼ ë©”ì¸í˜ì´ì§€ì— ê²Œì‹œë¬¼ë¡œ ë‚˜íƒ€ëƒ„
 - ê²Œì‹œë¬¼ì˜ ê²½ìš° ì‚¬ì§„ë§Œ ë³´ì—¬ì§€ë©° ë§ˆìš°ìŠ¤ê°€ ì‚¬ì§„ìœ¼ë¡œ ì´ë™ì‹œ ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ì—¬ ì‚°ì´ë¦„, ì‘ì„±ì, í¸ì˜ì‹œì„¤ì´ ë³´ì—¬ì§
 - ì‚¬ì§„ í´ë¦­ì‹œ ì‚¬ì§„, ì‚°ì´ë¦„, ìœ„ì¹˜, í¸ì˜ì‹œì„¤, ì†Œê°ì˜ ë°ì´í„°ê°€ ëª¨ë‘ ë³´ì—¬ì§ (modal ê¸°ëŠ¥ êµ¬í˜„)
---
 
## API êµ¬ì„±

### ì›¹í˜ì´ì§€ì˜ ë©”ì¸í˜ì´ì§€

*> - ë©”ì¸í˜ì´ì§€ì¸ index.html íŒŒì¼ê³¼ ë“±ë¡ëœ ê²Œì‹œê¸€ì˜ ì •ë³´ë¥¼ mongoDBì—ì„œ ê°€ì ¸ì™€ rendering í•´ì¤€ë‹¤.*

```python
@app.route('/')
def home():
    return render_template('index.html', msg=msg) 
```   

*> - ë¡œê·¸ì¸ í›„ ë³´ì—¬ì§€ëŠ” í˜ì´ì§€ë¡œ ë¡œê·¸ì¸í•œ ìƒíƒœì™€ ì•ˆí•œ ìƒíƒœë¥¼ êµ¬ë¶„í•˜ì—¬ ë¡œê·¸ì¸í•œ ìƒíƒœì¼ ê²½ìš° ì‚¬ìš©ì IDë¥¼ Clientë¡œ ì „ë‹¬í•œë‹¤.*   
*> - DBì— ì €ì¥ë˜ì–´ìˆëŠ” ê²Œì‹œê¸€ì˜ ë°ì´í„° ë¦¬ìŠ¤íŠ¸ë¥¼ ë¶ˆëŸ¬ì™€ ì „ë‹¬í•œë‹¤.* <br>
*> - ê²€ìƒ‰ì°½ì— ë‹¨ì–´ë¥¼ ê²€ìƒ‰í•  ê²½ìš°, ê²€ìƒ‰ì–´ì™€ ê²€ìƒ‰ ìƒíƒœë¥¼ í•¨ìˆ˜ íŒŒë¼ë¯¸í„°ë¡œ ë°›ì•„ì™€ ì „ë‹¬í•œë‹¤.* <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ê²€ìƒ‰ê¸°ëŠ¥ì„ ì‹¤í–‰í•˜ì§€ ì•Šì•˜ì„ ê²½ìš° ì„ì˜ë¡œ statusì—ëŠ” 'no', keywordì—ëŠ” ''ë¹ˆ ê°’ì„ ì „ë‹¬í•œë‹¤.

```python
@app.route('/login/home')
def home_():
    token_receive = request.cookies.get('mytoken')
    payload = jwt.decode(token_receive, SECRET_KEY, algorithms=['HS256'])
    user_id = payload["id"]
    posts = list(db.mountain_info.find({}, {'_id': False}))
    status = request.args.get("searched")
    keyword = request.args.get("keyword")
    
    if status is not None:
        return render_template('index.html', posts=posts, status=status, keyword=keyword, user_id=user_id)
    else:
        return render_template('index.html', posts=posts, status='no', keyword='', user_id=user_id)

```


### ë¡œê·¸ì¸ api
<!-- 
*> ë¡œê·¸ì¸í˜ì´ì§€ rendering*

```python
@app.route('/login')
def home_login():
    return render_template('register.html', msg=msg)
``` -->

<!-- *> ë¡œê·¸ì¸í˜ì´ì§€ ë¡œê·¸ì¸ ì¿ í‚¤ê°€ ë§Œë£Œ/ ì¡´ì¬í•˜ì§€ ì•Šì„ë•Œ ì²˜ë¦¬*

```python
@app.route('/login/login')
def login():
    
    return render_template('register.html')
    except jwt.ExpiredSignatureError:
        return redirect(url_for("login", msg="ë¡œê·¸ì¸ ì‹œê°„ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤."))
    except jwt.exceptions.DecodeError:
        return redirect(url_for("login", msg="ë¡œê·¸ì¸ ì •ë³´ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."))
``` -->

<!-- *> ë¡œê·¸ì¸ì‹œ pwë¥¼ í•´ì‰¬í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ DBì— ì €ì¥*

```python
@app.route('/sign_in', methods=['POST'])
def sign_in():
    
         return jsonify({'result': 'success', 'token': token})
    # ì°¾ì§€ ëª»í•˜ë©´
    else:
        return jsonify({'result': 'fail', 'msg': 'ì•„ì´ë””/ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.'})
``` -->

*> íšŒì›ê°€ì…ì‹œ ID pw í™•ì¸*

```
    public Boolean login(LoginRequestDto loginRequestDto){
        Member member = memberRepository.findByUsername(loginRequestDto.getUsername())
                .orElse(null);
        if (member != null) {
            if (!passwordEncoder.matches(loginRequestDto.getPassword(), member.getPassword())) {
                return false;
            }
        } else {
            return false;
        }
        return true;
    }
```

*> ë¡œê·¸ì¸ì‹œ ì•„ì´ë”” í™•ì¸*

```python
@app.route('/sign_in', methods=['POST'])
def sign_in():
    
         return jsonify({'result': 'success', 'token': token})
    # ì°¾ì§€ ëª»í•˜ë©´
    else:
        return jsonify({'result': 'fail', 'msg': 'ì•„ì´ë””/ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.'})
```

*> íšŒì›ê°€ì…ì‹œ ID ì¤‘ë³µí™•ì¸*

```
// íšŒì› ID ì¤‘ë³µ í™•ì¸
        Optional<Member> found = memberRepository.findByUsername(username);
        if (found.isPresent()) {
            throw new IllegalArgumentException("ì¤‘ë³µëœ ì‚¬ìš©ì ë‹‰ë„¤ì„ì´ ì¡´ì¬í•©ë‹ˆë‹¤.");
        }
```


*> íšŒì›ê°€ì…ì‹œ ID ë¹„ë°€ë²ˆí˜¸ í™•ì¸ *

```
// íšŒì› ID ì¤‘ë³µ í™•ì¸
        if(!password.equals(passwordCk)){
            throw new IllegalArgumentException("ë¹„ë°€ë²ˆí˜¸ì™€ ë¹„ë°€ë²ˆí˜¸ í™•ì¸ì´ ê°™ì§€ì•ŠìŠµë‹ˆë‹¤ í™•ì¸í•´ì£¼ì„¸ìš”");
        }
```



### ë“±ë¡ í˜ì´ì§€

*> ë“±ë¡í˜ì´ì§€ rendering*

```python
@app.route('/register')
def register_page():
    return render_template("write.html")
```

*> ë“±ë¡í˜ì´ì§€ì— ë“¤ì–´ì˜¤ëŠ” ìƒì„¸ë°ì´í„° DBì— ì €ì¥*

```python
@app.route('/register/save', methods=['POST'])
def register():
    
        return jsonify({"result": "success", 'msg': 'í¬ìŠ¤íŒ… ì„±ê³µ'})
    except (jwt.ExpiredSignatureError, jwt.exceptions.DecodeError):
        return redirect(url_for("/"))
```









## ì§„í–‰ë°©ì‹
> 

<br>

## ì§„í–‰ìƒí™©


* ë¡œê·¸ì¸ api
    - ë¡œê·¸ì¸: POST/login
         - id
         - password
    - ë¡œê·¸ì¸ ë·°: GET/login
    - ë¡œê·¸ì•„ì›ƒ: POST/logout
* íšŒì›ê°€ì… api
    - íšŒì›ê°€ì… ë·°: GET/register
    - íšŒì›ê°€ì…: POST/register
         - id
         - password
* ë©”ì¸í˜ì´ì§€ api
    - ë©”ì¸í˜ì´ì§€ ë·°: GET/main
        * List
            - image
            - description
            - username(id)
            - like
* ê²Œì‹œê¸€ ì‘ì„± api
    - ê²Œì‹œê¸€ ì‘ì„± ë·°: GET/main/write
    - ê²Œì‹œê¸€ ì‘ì„±: POST/main/write
        - Title
        - description
        - File
        - username(id)
